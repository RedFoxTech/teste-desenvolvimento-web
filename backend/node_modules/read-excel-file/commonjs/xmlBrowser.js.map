{"version":3,"sources":["../source/xmlBrowser.js"],"names":["createDocument","content","DOMParser","parseFromString","trim","select","doc","node","path","namespaces","nodes","evaluate","prefix","XPathResult","ANY_TYPE","results","result","iterateNext","push"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;kBACe;AACdA,eADc,0BACCC,OADD,EACU;AACvB;AACA;AACA,SAAO,IAAIC,SAAJ,GAAgBC,eAAhB,CAAgCF,QAAQG,IAAR,EAAhC,EAAgD,UAAhD,CAAP;AACA,EALa;AAOdC,OAPc,kBAOPC,GAPO,EAOFC,IAPE,EAOIC,IAPJ,EAO2B;AAAA,MAAjBC,UAAiB,uEAAJ,EAAI;;AACxC,MAAMC,QAAQJ,IAAIK,QAAJ,CACbH,IADa,EAEbD,QAAQD,GAFK,EAGb;AAAA,UAAUG,WAAWG,MAAX,CAAV;AAAA,GAHa,EAIbC,YAAYC,QAJC,EAKb,IALa,CAAd;AAOA;AACA,MAAMC,UAAU,EAAhB;AACA,MAAIC,SAASN,MAAMO,WAAN,EAAb;AACA,SAAOD,MAAP,EAAe;AACdD,WAAQG,IAAR,CAAaF,MAAb;AACAA,YAASN,MAAMO,WAAN,EAAT;AACA;AACD,SAAOF,OAAP;AACA;AAvBa,C","file":"xmlBrowser.js","sourcesContent":["// Turns out IE11 doesn't support XPath, so not using this code for browsers.\r\n// https://github.com/catamphetamine/read-excel-file/issues/26\r\n// The bundle size with `./xmlBrowser` is 190 kilobytes,\r\n// the bundle size with `./xmlNode` is 290 kilobytes,\r\n// so `./xmlBrowser` polyfill is about 100 kilobytes in size.\r\n// Still, IE11 is a wide-spread browser and it's unlikely that\r\n// anyone would ignore it for now.\r\nexport default {\r\n\tcreateDocument(content) {\r\n\t\t// A weird bug: it won't parse XML unless it's trimmed.\r\n\t\t// https://github.com/catamphetamine/read-excel-file/issues/21\r\n\t\treturn new DOMParser().parseFromString(content.trim(), 'text/xml')\r\n\t},\r\n\r\n\tselect(doc, node, path, namespaces = {}) {\r\n\t\tconst nodes = doc.evaluate(\r\n\t\t\tpath,\r\n\t\t\tnode || doc,\r\n\t\t\tprefix => namespaces[prefix],\r\n\t\t\tXPathResult.ANY_TYPE,\r\n\t\t\tnull\r\n\t\t)\r\n\t\t// Convert iterator to an array.\r\n\t\tconst results = []\r\n\t\tlet result = nodes.iterateNext()\r\n\t\twhile (result) {\r\n\t\t\tresults.push(result)\r\n\t\t\tresult = nodes.iterateNext()\r\n\t\t}\r\n\t\treturn results\r\n\t}\r\n}"]}